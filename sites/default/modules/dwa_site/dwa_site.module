<?php

/**
 * @info
 * Display logic related to the "site" content type.
 */

/**
 * Implementation of template_preprocess_node(&$variables)
 */
function dwa_site_preprocess_node(&$variables) {
  if (isset($variables['type']) && $variables['type'] == 'site') {
    $node = $variables['node'];
    $nid = $node->nid;
    $content = $variables['content'];

    // Override the default node display.    
    $variables['content'] = array();
    
    // Add the slideshow for this site.
    $variables['content'][] = array(
      '#markup' => views_embed_view('sod_front', 'default', $node->nid),
    );
    
    // Add the category.
    $variables['content'][] = $content['field_site_category'];
  }
}